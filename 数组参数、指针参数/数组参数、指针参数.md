# 数组参数、指针参数

写代码时难免要把【数组】或【指针】传递给函数，那函数的参数该如何设计呢？

## 案例引出（一维数组）

> ​	<img src="D:\大学\C语言程序设计\C_Learning\C_LearningRecord\数组参数、指针参数\image-20230124135038603.png" alt="image-20230124135038603" style="zoom:50%;" />

### 数组传参

上图所示代码中调用的test函数如下



> ​	<img src="D:\大学\C语言程序设计\C_Learning\C_LearningRecord\数组参数、指针参数\image-20230124135210379-16745399997672.png" alt="image-20230124135210379" style="zoom:50%;" />

以上三种函数参数的设计均是没有问题的：

- 对于第一、二中参数设计，形参的数组元素个声明在程序编译运行过程中是不会有任何影响的，程序员写函数的形参时，对数组元素个数的说明加与不加均可。
- 对于第三种参数设计，因为我们调用test时传递的是数组名，数组名是首元素的地址，而arr又是一个元素为整型int的数组，所以arr这个数组名就是整型int元素的地址，即一个指向int类型的指针，所以test用来接收这样的参数的形参就可以声明为int *arr

### 指针传参

> ​	<img src="D:\大学\C语言程序设计\C_Learning\C_LearningRecord\数组参数、指针参数\image-20230124153317892.png" alt="image-20230124153317892" style="zoom:50%;" />

以上的两个函数参数的设计也是没有问题的：

- 对于第一个参数设计，由于arr2本身是int* arr2[20]，所以接收它的形参写为int* arr[20]是完全没有问题的，是对应的。当然这里形参的[20]中的20也是可以省略不写的。
- 对于第二个参数设计，由于arr2的元素类型是int*指针类型，是一个一级指针，而arr2本身又是数组首元素的地址，也即是一个一级指针的地址->那么这就是一个二级指针，所以我们这里用一个二级指针的形参来接收也是没有问题的。

**以上两个例子说明，一维数组进行传参时，形参可以写成一维数组，也可以写成指针**。

## 案例引出（二维数组）

### 数组传参

> ​	<img src="D:\大学\C语言程序设计\C_Learning\C_LearningRecord\数组参数、指针参数\image-20230124155945269.png" alt="image-20230124155945269" style="zoom:50%;" />

对于上图的案例：

> ​	<img src="D:\大学\C语言程序设计\C_Learning\C_LearningRecord\数组参数、指针参数\image-20230124160136957.png" alt="image-20230124160136957" style="zoom:50%;" />
>
> test2和test3编译器会报错。

这是因为二维数组传参时，行下标可以省略，列下标就不能省略了，解释可以是上上个图中总结所说的那样，当然也可以这样理解：

> 因为二维数组的数组名是一个一维数组的地址，即是一个数组指针，那么既然是一个数组指针就需要表明这个数组指针所指向的数组是多少个元素的，而二维数组形参的列下标就是用来说明这一点的，所以不能省略。

### 指针传参

如果是下面这种情况：

> ![image-20230124160716576](D:\大学\C语言程序设计\C_Learning\C_LearningRecord\数组参数、指针参数\image-20230124160716576.png)
>
> 用一个一级指针来接收二维数组的数组名，此时编译器会报警告。

这是因为二维数组的数组名arr表示的是该数组第一行的数组的地址，即arr表示的是一维数组的地址，也即一个数组指针，而数组指针是不能用一个普通的变量指针来接收的，所以形参写int* arr编译器会报警告。

再如果是下面的情况：

> ​	<img src="D:\大学\C语言程序设计\C_Learning\C_LearningRecord\数组参数、指针参数\image-20230124161054123.png" alt="image-20230124161054123" style="zoom:50%;" />
>
> 此时用一个二级指针来接收，编译器也是会报错的。

因为main函数中的arr是数组的地址，test4中的arr是一个二级指针，存放的是一级指针变量的地址的，所以数组的地址存放到这里也是是不合适的。

如果要正确地用指针接收二维数组，应该如下：

> ​	<img src="D:\大学\C语言程序设计\C_Learning\C_LearningRecord\数组参数、指针参数\image-20230124161445362.png" alt="image-20230124161445362" style="zoom:50%;" />

此时将形参声明为一个数组指针，与main中的arr对应，此时编译器就不会报警告了。

下图中：

> ​	<img src="D:\大学\C语言程序设计\C_Learning\C_LearningRecord\数组参数、指针参数\image-20230124161621511.png" alt="image-20230124161621511" style="zoom:50%;" />

- 第一种函数参数的写法肯定是不行的，我们上面分析过了。
- 第二种函数参数是用来接收一维指针数组的，肯定无法接收二维数组。
- 第三种函数参数就是OK的，我们分析过了。
- 第四种函数参数是不行的，我们也分析过了。

# 函数参数是二级指针时

> ​	<img src="D:\大学\C语言程序设计\C_Learning\C_LearningRecord\数组参数、指针参数\image-20230125114645685.png" alt="image-20230125114645685" style="zoom:50%;" />

函数参数是二级指针时可以传参一级指针的地址、二级指针或一级指针数组的数组名。