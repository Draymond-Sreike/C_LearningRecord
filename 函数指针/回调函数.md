# 回调函数

> ![image-20230202111512710](D:\大学\C语言程序设计\C_Learning\C_LearningRecord\函数指针\image-20230202111512710.png)

## 应用案例1

> ​	<img src="D:\大学\C语言程序设计\C_Learning\C_LearningRecord\函数指针\image-20230203155244820.png" alt="image-20230203155244820" style="zoom:50%;" />

此时我们是在test函数的内部去调用print函数，print函数并不是我们在主程序中主动去调用的，而是我们把print函数的地址传给test函数，然后在test函数的内部通过这个地址去调用print函数，此时print函数就被称为回调函数。

这里对于回调函数概念解释中的”实现方“我们可以理解为是main函数，而”另外的一方“就是test函数。

## 应用案例2

> ​	<img src="D:\大学\C语言程序设计\C_Learning\C_LearningRecord\函数指针\image-20230202112120113.png" alt="image-20230202112120113" style="zoom:50%;" />

对于上面的代码可以察觉一个问题：冗余。因为有很多重复（如红框所示），唯一不同的仅仅是调用函数的函数名（蓝框所框部分），所以我们想进一步改造：我们想要把这部分红框所圈的代码整合成一个函数，唯一的区别就在于传入的参数不同，传入的参数就是蓝框所框的函数名，改造后我们期望的代码如下：

> ​	<img src="D:\大学\C语言程序设计\C_Learning\C_LearningRecord\函数指针\image-20230202112613985.png" alt="image-20230202112613985" style="zoom:50%;" />

这样就使得代码变得简介明了了，那么具体如何实现这个Calc函数呢，见下文：

> ​	<img src="D:\大学\C语言程序设计\C_Learning\C_LearningRecord\函数指针\image-20230202112720395.png" alt="image-20230202112720395" style="zoom:50%;" />

这样，当外部传入什么样的函数名/地址，Calc函数就能用pf接收到这个函数名/地址，并且在函数中利用这个函数名/地址来调用其对应的函数而执行对应的功能。

> ​	执行示意图（该图较乱）：
>
> <img src="D:\大学\C语言程序设计\C_Learning\C_LearningRecord\函数指针\image-20230202113023763.png" alt="image-20230202113023763" style="zoom:50%;" />

我们能明确Calc这个函数就是通过我们传给他的函数名/地址去调用相应的函数，此时Calc函数本身就相当于具有不同的功能（随着传入参数的不同）

**对于上面的过程，我们把A函数的地址传递给B函数的函数指针形参，然后在B函数内部通过这个指针去调用A函数，此时A函数就称为“回调函数”。**

从上面的案例中我们能够发现，我们通过回调函数很好地解决了代码冗余的问题。

